!function(t){"use strict";var e=function(){for(var t=this.preParsedOutput||this.input,e=0;e<this.tokens.length;e++)t=t.replace(this.tokens[e].text,n(this.tokens[e].value));return t},n=function(t){return t.hasOwnProperty("toString")?t.toString():t},s=function(t,n,s,r){this.input=t,this.tokens=n,this.preParsedOutput=s||null,this.preParsedResults=r||null,this.digify=e.bind(this)},r=function(t,e){if(!this.hasOwnProperty("name")||"string"!=typeof this.name||!this.hasOwnProperty("parse")||"function"!=typeof this.parse||"function Object() { [native code] }"===this.constructor.toString())throw new Error('BaseTranslator must be inheritied and properties set for "name" and "parse"');if("undefined"==typeof a[this.name])throw new Error('"'+this.name+'" must be registered before it is instantiated');if(this.locale=e||a[this.name].defaultLocale,-1===a[this.name].supportedLocales.indexOf(this.locale))throw new Error('Locale "'+this.locale+'" is not supported by "'+this.name+'"');this.onTranslate=t,this.hasOwnProperty("assistants")||(this.assistants=[])};r.prototype={listen:function(t,e){if("string"==typeof t&&document&&document.getElementById&&(t=document.getElementById(t)),"undefined"==typeof e&&(e="input"),t.addEventListener)t.addEventListener(e,this.translate.bind(this,t));else if(t.attachEvent)t.attachEvent("on"+e,this.translate.bind(this,t));else if("undefined"!=typeof t["on"+e])t["on"+e]=this.translate.bind(this,null,t);else{if("undefined"==typeof t[e])throw new Error("Could not find an appropriate event to bind to");t[e]=this.translate.bind(this,null,t)}},translate:function(){var t=arguments.length,e=this.locale;-1!==a[this.name].supportedLocales.indexOf(arguments[arguments.length-1])&&(t=arguments.length-1,e=arguments[t]);var n="",s=t-1;if("string"==typeof arguments[s]?n=arguments[s]:arguments[s]&&arguments[s].target&&arguments[s].target.value&&(n=arguments[s].target.value),n){var r=this.parse(n,e);return this.onTranslate&&arguments.length>1&&"string"!=typeof arguments[0]&&this.onTranslate(r,arguments[0]),r}},passToAssistants:function(t,e){for(var n=t,s=[],r=0;r<this.assistants.length;r++)s.push(o(this.assistants[r]).parse(n,e)),n=s[r].digify();return{preParsedOutput:n,preParsedResults:s}}},t.ParsedResult=s,t.BaseTranslator=r;var a={},i=function(t,e,n,s){a[t]={instance:null,defaultLocale:n,supportedLocales:s},a[t].instance=new e};t.registerTranslator=i;var o=function(t,e){if(e=e||a[t].instance.locale,-1===a[t].supportedLocales.indexOf(e))throw new Error('Locale "'+this.locale+'" is not supported by "'+t+'"');return a[t].locale=e||a[t].instance.locale,a[t].instance};t.getTranslator=o}("undefined"==typeof exports?this.babelchip=this.babelchip||{}:exports);