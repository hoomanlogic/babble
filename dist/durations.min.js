!function(exports){"use strict";if("undefined"!=typeof require)var core=require("./core.js"),numbers=require("./numbers.js");else var core=window.__babelchip_core__;var Preparsers=[numbers||window.numbers],Locales={"en-US":{hours:["h","hr","hrs","hour","hours"],minutes:["m","min","mins","minute","minutes"],joiners:[",","and",""]}},CurrentLocale=Locales["en-US"];Locales["de-DE"]={hours:["h","hr","ohre"],minutes:["m","min","minuten"]},exports.parse=function(input,locale){locale=locale&&Locales[locale]?Locales[locale]:CurrentLocale;var preParsedOutput=input,preParsedResults=[];if(Preparsers&&Preparsers.length>0)for(var i=0;i<Preparsers.length;i++)preParsedResults.push(Preparsers[i].parse(preParsedOutput,locale)),preParsedOutput=preParsedResults[i].digify();for(var formats=[/((\d)+ *?(days|day|dys|dy|d){1})?/gi,/((\d)+ *?(hours|hour|hrs|hr|h){1})?/gi,/((\d)+ *?(minutes|minute|mins|min|m){1})?/gi,/((\d)+ *?(seconds|second|secs|sec|s){1})?/gi,/((\d)+ *?(milliseconds|millisecond|millisecs|millisec|msecs|msec|ms){1})?/gi,/(\d+)?:?(\d+):(\d+)/gi],insertByPosition=function(e,s){if(0===e.length||e[e.length-1].pos<s.pos)e.push(s);else for(var r=0;r<e.length;r++){if(e[r].pos>s.pos){e.splice(r,0,s);break}if(e[r].pos===s.pos&&e[r].len<s.len){e.splice(r,1,s);break}}},matches=[],i=0;i<formats.length;i++)preParsedOutput.replace(formats[i],function(){""!==arguments[0].trim()&&insertByPosition(matches,{pos:arguments[arguments.length-2],len:arguments[0].length,value:arguments[0]})});if(0===matches.length)return new core.ParsedResult(input,[],preParsedOutput,preParsedResults);for(var segments=[],i=0;i<matches.length;i++){var text=preParsedOutput.slice(matches[i].pos,matches[i].pos+matches[i].len);segments.push({kind:"duration",pos:matches[i].pos,value:0,text:text});var reDays=/ *?(days|day|dys|dy|d)$/gi,reHours=/ *?(hours|hour|hrs|hr|h)$/gi,reMinutes=/ *?(minutes|minute|mins|min|m)$/gi,reSeconds=/ *?(seconds|second|secs|sec|s)$/gi,reMilliseconds=/ *?(milliseconds|millisecond|millisecs|millisec|msecs|msec|ms)$/gi;text=text.replace(reDays," * 24 * 60 * 60 * 1000"),text=text.replace(reHours," * 60 * 60 * 1000"),text=text.replace(reMinutes," * 60 * 1000"),text=text.replace(reMilliseconds,""),text=text.replace(reSeconds," * 1000"),segments[i].value=parseFloat(eval(text))}for(var results=[],prev=null,next=null,i=0;i<segments.length;i++){if(next=segments[i],prev){var joiner=preParsedOutput.slice(prev.pos+prev.text.length,next.pos);locale.joiners.indexOf(joiner.trim())>-1?(next.value+=prev.value,next.text=preParsedOutput.slice(prev.pos,next.pos+next.text.length),next.pos=prev.pos):results.push(prev)}prev=segments[i]}return results.push(next),new core.ParsedResult(input,results,preParsedOutput,preParsedResults)}}("undefined"==typeof exports?this.durations={}:exports);