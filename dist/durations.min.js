!function(exports){"use strict";if("undefined"!=typeof require)var core=require("./core.js"),numbers=require("./numbers.js");else var core=window.__babelchip_core__;var Preparsers=[numbers||window.numbers],Locales={"en-US":{hours:["h","hr","hrs","hour","hours"],minutes:["m","min","mins","minute","minutes"],joiners:[",","and",""]}},CurrentLocale=Locales["en-US"];Locales["de-DE"]={hours:["h","hr","ohre"],minutes:["m","min","minuten"]},exports.Duration=function(e){this.value=e,this.milliseconds=e,this.seconds=0,this.minutes=0,this.hours=0,this.days=0,e>999&&(this.seconds=Math.floor(this.milliseconds/1e3),this.milliseconds=this.milliseconds%1e3,this.seconds>59&&(this.minutes=Math.floor(this.seconds/60),this.seconds-=60*this.minutes,this.minutes>59&&(this.hours=Math.floor(this.minutes/60),this.minutes-=60*this.hours,this.hours>23&&(this.days=Math.floor(this.hours/24),this.hours-=24*this.days))))};var zeroOneOrMany=function(e,s){var t=function(e){return"y"===e[e.length-1]?e.substring(0,e.length-1)+"ies":e+"s"};return 0===s?"no "+t(e):1===s?e:t(e)};exports.Duration.prototype.hoomanize=function(e){"undefined"!=typeof e&&null!==e&&this.hasOwnProperty(e)||(e="milliseconds");var s=[];return this.days&&s.push(this.days+" "+zeroOneOrMany("day",this.days)),"days"===e?s.join(", "):(this.hours&&s.push(this.hours+" "+zeroOneOrMany("hour",this.hours)),"hours"===e?s.join(", "):(this.minutes&&s.push(this.minutes+" "+zeroOneOrMany("minute",this.minutes)),"minutes"===e?s.join(", "):(this.seconds&&s.push(this.seconds+" "+zeroOneOrMany("second",this.seconds)),"seconds"===e?s.join(", "):(this.milliseconds&&s.push(this.milliseconds+" "+zeroOneOrMany("millisecond",this.milliseconds)),s.join(", ")))))},exports.Duration.prototype.toMinutes=function(){return this.value>6e4?Math.floor(this.value/1e3/60):0},exports.Duration.prototype.toString=function(){return this.value},exports.parse=function(input,locale){locale=locale&&Locales[locale]?Locales[locale]:CurrentLocale;var preParsedOutput=input,preParsedResults=[];if(Preparsers&&Preparsers.length>0)for(var i=0;i<Preparsers.length;i++)preParsedResults.push(Preparsers[i].parse(preParsedOutput,locale)),preParsedOutput=preParsedResults[i].digify();for(var formats=[/((\d)+ *?(days|day|dys|dy|d){1})?/gi,/((\d)+ *?(hours|hour|hrs|hr|h){1})?/gi,/((\d)+ *?(minutes|minute|mins|min|m){1})?/gi,/((\d)+ *?(seconds|second|secs|sec|s){1})?/gi,/((\d)+ *?(milliseconds|millisecond|millisecs|millisec|msecs|msec|ms){1})?/gi,/(\d+)?:?(\d+):(\d+)/gi],insertByPosition=function(e,s){if(0===e.length||e[e.length-1].pos<s.pos)e.push(s);else for(var t=0;t<e.length;t++){if(e[t].pos>s.pos){e.splice(t,0,s);break}if(e[t].pos===s.pos&&e[t].len<s.len){e.splice(t,1,s);break}}},matches=[],i=0;i<formats.length;i++)preParsedOutput.replace(formats[i],function(){""!==arguments[0].trim()&&insertByPosition(matches,{pos:arguments[arguments.length-2],len:arguments[0].length,value:arguments[0]})});if(0===matches.length)return new core.ParsedResult(input,[],preParsedOutput,preParsedResults);for(var segments=[],i=0;i<matches.length;i++){var text=preParsedOutput.slice(matches[i].pos,matches[i].pos+matches[i].len);segments.push({kind:"duration",pos:matches[i].pos,value:0,text:text});var reDays=/ *?(days|day|dys|dy|d)$/gi,reHours=/ *?(hours|hour|hrs|hr|h)$/gi,reMinutes=/ *?(minutes|minute|mins|min|m)$/gi,reSeconds=/ *?(seconds|second|secs|sec|s)$/gi,reMilliseconds=/ *?(milliseconds|millisecond|millisecs|millisec|msecs|msec|ms)$/gi;text=text.replace(reDays," * 24 * 60 * 60 * 1000"),text=text.replace(reHours," * 60 * 60 * 1000"),text=text.replace(reMinutes," * 60 * 1000"),text=text.replace(reMilliseconds,""),text=text.replace(reSeconds," * 1000"),segments[i].value=parseFloat(eval(text))}for(var results=[],prev=null,next=null,i=0;i<segments.length;i++){if(next=segments[i],prev){var joiner=preParsedOutput.slice(prev.pos+prev.text.length,next.pos);locale.joiners.indexOf(joiner.trim())>-1?(next.value+=prev.value,next.text=preParsedOutput.slice(prev.pos,next.pos+next.text.length),next.pos=prev.pos):results.push(prev)}prev=segments[i]}results.push(next);for(var i=0;i<results.length;i++)results[i].value=new exports.Duration(results[i].value);return new core.ParsedResult(input,results,preParsedOutput,preParsedResults)}}("undefined"==typeof exports?this.durations={}:exports);