!function(t){"use strict";var e=function(){for(var t=this.preParsedOutput||this.input,e=0;e<this.tokens.length;e++)t=t.replace(this.tokens[e].text,n(this.tokens[e].value));return t},n=function(t){return t.hasOwnProperty("toString")?t.toString():t},s=function(t,n,s,r){this.input=t,this.tokens=n,this.preParsedOutput=s||null,this.preParsedResults=r||null,this.digify=e.bind(this)},r=function(t,e){if(!this.hasOwnProperty("name")||"string"!=typeof this.name||!this.hasOwnProperty("parse")||"function"!=typeof this.parse||"function Object() { [native code] }"===this.constructor.toString())throw new Error('BaseTranslator must be inheritied and properties set for "name" and "parse"');if("undefined"==typeof a[this.name])throw new Error('"'+this.name+'" must be registered before it is instantiated');if(this.locale=e||a[this.name].defaultLocale,-1===a[this.name].supportedLocales.indexOf(this.locale))throw new Error('Locale "'+this.locale+'" is not supported by "'+this.name+'"');this.onTranslate=t||null,this.hasOwnProperty("assistants")||(this.assistants=[])};r.prototype={listen:function(t,e,n){if("string"==typeof t&&document&&document.getElementById&&(t=document.getElementById(t)),e=e||"input",n=n||this.onTranslate,t.addEventListener)t.addEventListener(e,this.translate.bind(this,t,n));else if(t.attachEvent)t.attachEvent("on"+e,this.translate.bind(this,t,n));else if("undefined"!=typeof t["on"+e])t["on"+e]=this.translate.bind(this,t,n);else{if("undefined"==typeof t[e])throw new Error("Could not find an appropriate event to bind to");t[e]=this.translate.bind(this,t,n)}},translate:function(){var t=arguments.length,e=this.locale;-1!==a[this.name].supportedLocales.indexOf(arguments[arguments.length-1])&&(t=arguments.length-1,e=arguments[t]);var n="",s=t-1;if("string"==typeof arguments[s]?n=arguments[s]:arguments[s]&&arguments[s].target&&arguments[s].target.value&&(n=arguments[s].target.value),n){var r=this.parse(n,e);return arguments.length>2&&"function"==typeof arguments[1]?arguments[1](r,arguments[0]):this.onTranslate&&arguments.length>1&&"string"!=typeof arguments[0]&&this.onTranslate(r,arguments[0]),r}},passToAssistants:function(t,e){for(var n=t,s=[],r=0;r<this.assistants.length;r++)s.push(o(this.assistants[r]).parse(n,e)),n=s[r].digify();return{preParsedOutput:n,preParsedResults:s}}},t.ParsedResult=s,t.BaseTranslator=r;var a={},i=function(t,e,n,s){a[t]={instance:null,defaultLocale:n,supportedLocales:s},a[t].instance=new e};t.register=i;var o=function(t,e){if(e=e||a[t].instance.locale,-1===a[t].supportedLocales.indexOf(e))throw new Error('Locale "'+this.locale+'" is not supported by "'+t+'"');return a[t].locale=e||a[t].instance.locale,a[t].instance};t.get=o;var u=function(t,e){var n=null,s=null,r=null;if(arguments.length<3||"function"!=typeof arguments[arguments.length-1])throw new TypeError("Unexpected number of arguments");r=arguments[arguments.length-1],arguments.length>3&&(n=arguments[2]),arguments.length>4&&(s=arguments[3]);var a=o(t,s);a.listen(e,n,r)};t.assign=u}("undefined"==typeof exports?this.babble=this.babble||{}:exports);
!function(s){"use strict";var e={"en-US":{year:{full:"year","short":"yr",symbol:"y"},day:{full:"day","short":"dy",symbol:"d"},hour:{full:"hour","short":"hr",symbol:"h"},minute:{full:"minute","short":"min",symbol:"m"},second:{full:"second","short":"sec",symbol:"s"},millisecond:{full:"millisecond","short":"msec",symbol:"ms"},timeJoiners:[",","and",""],modifierJoiners:["of an","an","a",""],modifiers:{quarter:.25,half:.5},formatNoun:function(s,e){var t=function(s){var e=["a","e","i","o","u"];return"y"===s[s.length-1]&&-1===e.indexOf(s[s.length-2].toLowerCase())?s.substring(0,s.length-1)+"ies":s+"s"};return 0===e?"no "+t(s):1===e?s:t(s)}}},t=1e3,n=60*t,a=60*n,r=24*a,i=365*r;s.Duration=function(s){this.value=s,this.milliseconds=0,this.seconds=0,this.minutes=0,this.hours=0,this.days=0,this.years=0;var e=s;e>=i&&(this.years=Math.floor(e/i),e-=this.years*i),e>=r&&(this.days=Math.floor(e/r),e-=this.days*r),e>=a&&(this.hours=Math.floor(e/a),e-=this.hours*a),e>=n&&(this.minutes=Math.floor(e/n),e-=this.minutes*n),e>=t&&(this.seconds=Math.floor(e/t),e-=this.seconds*t),this.milliseconds=e},s.Duration.prototype.hoomanize=function(s,t){t=t&&e[t]?e[t]:e[h],"undefined"!=typeof s&&null!==s&&this.hasOwnProperty(s)||(s="milliseconds");var n=[];return this.days&&n.push(this.days+" "+t.formatNoun(t.day.full,this.days)),"days"===s?n.join(", "):(this.hours&&n.push(this.hours+" "+t.formatNoun(t.hour.full,this.hours)),"hours"===s?n.join(", "):(this.minutes&&n.push(this.minutes+" "+t.formatNoun(t.minute.full,this.minutes)),"minutes"===s?n.join(", "):(this.seconds&&n.push(this.seconds+" "+t.formatNoun(t.second.full,this.seconds)),"seconds"===s?n.join(", "):(this.milliseconds&&n.push(this.milliseconds+" "+t.formatNoun(t.millisecond.full,this.milliseconds)),n.join(", ")))))},s.Duration.prototype.toMinutes=function(){return this.value>6e4?Math.floor(this.value/1e3/60):0},s.Duration.prototype.toString=function(){return this.value};var o=function(i,o){o=o&&e[o]?e[o]:e[h];for(var u=this.passToAssistants(i,o),f=u.preParsedOutput,c=u.preParsedResults,d=[/(((\d)+|half of an |half of a |half an |half a |half|quarter|an |a ) *?(days|day|dys|dy|d){1})?/gi,/(((\d)+|half of an |half of a |half an |half a |half|quarter|an |a ) *?(hours|hour|hrs|hr|h){1})?/gi,/(((\d)+|half of an |half of a |half an |half a |half|quarter|an |a ) *?(minutes|minute|mins|min|m){1})?/gi,/(((\d)+|half of an |half of a |half an |half a |half|quarter|an |a ) *?(seconds|second|secs|sec|s){1})?/gi,/((\d)+ *?(milliseconds|millisecond|millisecs|millisec|msecs|msec|ms){1})?/gi],m=function(s,e){if(0===s.length||s[s.length-1].pos<e.pos)s.push(e);else for(var t=0;t<s.length;t++){if(s[t].pos>e.pos){s.splice(t,0,e);break}if(s[t].pos===e.pos&&s[t].len<e.len){s.splice(t,1,e);break}}},p=[],g=0;g<d.length;g++)f.replace(d[g],function(){""!==arguments[0].trim()&&m(p,{pos:arguments[arguments.length-2],len:arguments[0].length,value:arguments[0]})});if(f.replace(/((\d)+:(\d)+(:(\d)+)?(:(\d)+)?(\.(\d){1,3})?)/gi,function(){""!==arguments[0].trim()&&m(p,{pos:arguments[arguments.length-2],len:arguments[0].length,value:arguments[0]})}),0===p.length)return new l.ParsedResult(i,[],f,c);for(var y=[],g=0;g<p.length;g++){var v=f.slice(p[g].pos,p[g].pos+p[g].len);if(y.push({kind:"duration",pos:p[g].pos,value:0,text:v}),v.indexOf(":")>0){var b=v.split(":");if(2===b.length)y[g].value=a*parseInt(b[0])+n*parseInt(b[1]);else if(3===b.length){var q=b[2].split("."),w=q[0];q=q.length>1?1===String(q[1]).length?".00"+q[1]:2===String(q[1]).length?".0"+q[1]:"."+q[1]:"",y[g].value=a*parseInt(b[0])+n*parseInt(b[1])+t*parseFloat(w+q)}else if(4===b.length){var q=b[3].split("."),w=q[0];q=q.length>1?1===String(q[1]).length?".00"+q[1]:2===String(q[1]).length?".0"+q[1]:"."+q[1]:"",y[g].value=r*parseInt(b[0])+a*parseInt(b[1])+n*parseInt(b[2])+t*parseFloat(w+q)}}else{var x=/ *?(days|day|dys|dy|d)$/gi,j=/ *?(hours|hour|hrs|hr|h)$/gi,I=/ *?(minutes|minute|mins|min|m)$/gi,N=/ *?(seconds|second|secs|sec|s)$/gi,S=/ *?(milliseconds|millisecond|millisecs|millisec|msecs|msec|ms)$/gi,M=/(half an|half a|half of an|half of a|half of|half)/gi,D=/(quarter of an|quarter of a|quarter of|quarter)/gi,O=/(an|a)/gi,P=0;v=v.replace(S,""),v=v.replace(N,function(){return P=t,""}),v=v.replace(x,function(){return P=r,""}),v=v.replace(j,function(){return P=a,""}),v=v.replace(I,function(){return P=n,""}),v=v.replace(M,function(){return P*=.5,""}),v=v.replace(D,function(){return P*=.25,""}),v=v.replace(O,"");var $=parseInt(v);"NaN"===$.toString()&&($=1),0===P&&(P=1),y[g].value=$*P}}for(var T=[],k=null,J=null,g=0;g<y.length;g++){if(J=y[g],k){var R=f.slice(k.pos+k.text.length,J.pos);o.timeJoiners.indexOf(R.trim())>-1?(J.value+=k.value,J.text=f.slice(k.pos,J.pos+J.text.length),J.pos=k.pos):T.push(k)}k=y[g]}T.push(J);for(var g=0;g<T.length;g++)T[g].value=new s.Duration(T[g].value);return new l.ParsedResult(i,T,f,c)};if("undefined"!=typeof require){var l=require("./core.js");require("./numbers.js")}else{var l=window.babble;window.babble}var u=function(s,e){this.name="durations",this.parse=o,this.assistants=["numbers"],l.BaseTranslator.call(this,s,e)};u.prototype=Object.create(l.BaseTranslator.prototype),u.prototype.constructor=u,s.DurationTranslator=u;var h="en-US",f=[];for(var c in e)f.push(c);l.register("durations",u,h,f)}("undefined"==typeof exports?this.babble=this.babble||{}:exports);
!function(exports){"use strict";function digify(){for(var e=this.preParsedOutput||this.input,s=0;s<this.tokens.length;s++)e=e.replace(this.tokens[s].text,this.tokens[s].value);return e}function ParsedResult(e,s,t,r){this.input=e,this.tokens=s,this.preParsedOutput=t||null,this.preParsedResults=r||null,this.digify=digify.bind(this)}if("undefined"!=typeof require)var core=require("./core.js"),numbers=require("./numbers.js");else var core=window.babble;var Preparsers=[numbers||window.numbers],Locales={"en-US":{hours:["h","hr","hrs","hour","hours"],minutes:["m","min","mins","minute","minutes"],joiners:[",","and",""]}};Locales["de-DE"]={hours:["h","hr","ohre"],minutes:["m","min","minuten"]},exports.parse=function(input,locale){locale=locale&&Locales[locale]?Locales[locale]:Locales["en-US"];var preParsedOutput=input,preParsedResults=[];if(Preparsers&&Preparsers.length>0)for(var i=0;i<Preparsers.length;i++)preParsedResults.push(Preparsers[i].parse(preParsedOutput,locale)),preParsedOutput=preParsedResults[i].digify();for(var formats=[/((\d)+ *?(days|day|dys|dy|d){1})?/gi,/((\d)+ *?(hours|hour|hrs|hr|h){1})?/gi,/((\d)+ *?(minutes|minute|mins|min|m){1})?/gi,/((\d)+ *?(seconds|second|secs|sec|s){1})?/gi,/((\d)+ *?(milliseconds|millisecond|millisecs|millisec|msecs|msec|ms){1})?/gi,/(\d+)?:?(\d+):(\d+)/gi],insertByPosition=function(e,s){if(0===e.length||e[e.length-1].pos<s.pos)e.push(s);else for(var t=0;t<e.length;t++){if(e[t].pos>s.pos){e.splice(t,0,s);break}if(e[t].pos===s.pos&&e[t].len<s.len){e.splice(t,1,s);break}}},matches=[],i=0;i<formats.length;i++)preParsedOutput.replace(formats[i],function(){""!==arguments[0].trim()&&insertByPosition(matches,{pos:arguments[arguments.length-2],len:arguments[0].length,value:arguments[0]})});if(0===matches.length)return new core.ParsedResult(input,[],preParsedOutput,preParsedResults);for(var segments=[],i=0;i<matches.length;i++){var text=preParsedOutput.slice(matches[i].pos,matches[i].pos+matches[i].len);segments.push({kind:"duration",pos:matches[i].pos,value:0,text:text});var reDays=/ *?(days|day|dys|dy|d)$/gi,reHours=/ *?(hours|hour|hrs|hr|h)$/gi,reMinutes=/ *?(minutes|minute|mins|min|m)$/gi,reSeconds=/ *?(seconds|second|secs|sec|s)$/gi,reMilliseconds=/ *?(milliseconds|millisecond|millisecs|millisec|msecs|msec|ms)$/gi;text=text.replace(reDays," * 24 * 60 * 60 * 1000"),text=text.replace(reHours," * 60 * 60 * 1000"),text=text.replace(reMinutes," * 60 * 1000"),text=text.replace(reMilliseconds,""),text=text.replace(reSeconds," * 1000"),segments[i].value=parseFloat(eval(text))}for(var results=[],prev=null,next=null,i=0;i<segments.length;i++){if(next=segments[i],prev){var joiner=preParsedOutput.slice(prev.pos+prev.text.length,next.pos);locale.joiners.indexOf(joiner.trim())>-1?(next.value+=prev.value,next.text=preParsedOutput.slice(prev.pos,next.pos+next.text.length),next.pos=prev.pos):results.push(prev)}prev=segments[i]}return results.push(next),new core.ParsedResult(input,results,preParsedOutput,preParsedResults)}}("undefined"==typeof exports?this.moments={}:exports);
!function(e){"use strict";var n={"en-US":{numbers:{zero:0,one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9,ten:10,eleven:11,twelve:12,thirteen:13,fourteen:14,fifteen:15,sixteen:16,seventeen:17,eighteen:18,nineteen:19,twenty:20,thirty:30,forty:40,fifty:50,sixty:60,seventy:70,eighty:80,ninety:90,hundred:100,thousand:1e3,million:1e6,billion:1e9,tenth:.1,hundredth:.01,thousandth:.001},joiners:[""," "," and ","-"],flippers:[]}};n["de-DE"]={numbers:{"null":0,ein:1,eine:1,eins:1,zwei:2,zwo:2,drei:3,vier:4,"fünf":5,sechs:6,sieben:7,acht:8,neun:9,zehn:10,elf:11,"zwölf":12,dreizehn:13,vierzehn:14,"fünfzehn":15,sechzehn:16,siebzehn:17,achtzehn:18,neunzehn:19,zwanzig:20,"dreißig":30,vierzig:40,"fünfzig":50,sechzig:60,siebzig:70,achtzig:80,neunzig:90,hundert:100,tausend:1e3,million:1e6,milliarde:1e9},joiners:[""," ","und"," und ","-"],flippers:["und"," und "]};var s=function(e,s){s=s&&n[s]?n[s]:n[i];var r=[];for(var u in s.numbers)r.push(u);r.reverse();var l=function(e,n){if(0===e.length||e[e.length-1].pos<n.pos)e.push(n);else for(var s=0;s<e.length;s++)if(e[s].pos>n.pos){e.splice(s,0,n);break}},a=[],o=new RegExp("("+r.join("|")+")","gi");if(e.replace(o,function(){l(a,{pos:arguments[arguments.length-2],len:arguments[0].length,value:s.numbers[arguments[0].toLowerCase()]||parseFloat(arguments[0])})}),o=/([+-]{0,1}\d+)/gi,e.replace(o,function(){l(a,{pos:arguments[arguments.length-2],len:arguments[0].length,value:parseFloat(arguments[0])})}),0===a.length)return new t.ParsedResult(e,[]);for(var g=function(e){return 1>e?"":String(e).length},h=[{kind:"number",pos:0,value:0,text:"",segments:[0]}],p=0,f=0,m=null,v=0;v<a.length;v++){if(m){var c=e.slice(m.pos+m.len,a[v].pos);-1===s.joiners.indexOf(c)&&(h[p].value=h[p].segments.reduce(function(e,n){return(e||0)+n}),h[p].text=e.slice(h[p].pos,m.pos+m.len),h.push({kind:"number",pos:0,value:0,text:"",segments:[0]}),p++,f=0,m=null,h[p].pos=a[v].pos)}else h[p].pos=a[v].pos;if(m&&(g(h[p].segments[f])<g(a[v].value)||a[v].value<1))if(f>0&&h[p].segments[f-1]<a[v].value){for(var d=0,b=0,z=h[p].segments.length-1;z>-1;z--){if(d+h[p].segments[z]>a[v].value){b=z+1;break}d+=h[p].segments[z]}h[p].segments.splice(b,h[p].segments.length),f=b,h[p].segments.push(d*a[v].value)}else s.flippers.indexOf(e.slice(m.pos+m.len,a[v].pos))>-1?h[p].segments[f]+=a[v].value:h[p].segments[f]=h[p].segments[f]*a[v].value;else m&&h[p].segments[f]>a[v].value?(h[p].segments.push(a[v].value),f++):h[p].segments[f]+=a[v].value;m=a[v]}return h[p].value=h[p].segments.reduce(function(e,n){return(e||0)+n}),h[p].text=e.slice(h[p].pos,m.pos+m.len),new t.ParsedResult(e,h)};if("undefined"!=typeof require)var t=require("./core.js");else var t=window.babble;var r=function(e,n){this.name="numbers",this.parse=s,t.BaseTranslator.call(this,e,n)};r.prototype=Object.create(t.BaseTranslator.prototype),r.prototype.constructor=r,e.NumberTranslator=r;var i="en-US",u=[];for(var l in n)u.push(l);t.register("numbers",r,i,u)}("undefined"==typeof exports?this.babble=this.babble||{}:exports);
